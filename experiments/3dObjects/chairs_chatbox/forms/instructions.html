
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../../../lib/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>

      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>Where's My Chair?</center>  </h2>

	<p>

	  In this experiment you will play a fun communication game with
	  another player on MTurk! In each round both of you are going to be shown a set of chairs like this:
</p>
    <p>
      <center><img src="images/chairset.png" alt="Example objects" style="width:500px;height:164px"></center>
    </p>
<p>
    You'll each see the same three chairs <b> but the order they are in
	will be different. </b>

</p>

<p>

    One of you will be assigned the <b> Speaker </b> role and the
    other will be the <b> Listener</b>. On each round, one of the three
    chairs is the <b>target</b>, which is outlined in orange. Only the
    Speaker can see which object is the target.



</p>

<p>

    The goal of the Speaker is to describe the target using the chatbox so
    that the Viewer can figure out which chair it is. You'll both
    get <b> a bonus of $0.02 for each correct response</b>, so pay
    attention! 

</p>

<!-- <p>
      <center><img src="images/speakerView.png" alt="Example gameplay" style="width:600px;height:328px"></center>
    </p>
<p>
  <i> <center> <small> Only the Sketcher can see which is the target. </small> </center> </i>

</p> -->
<p>
    The goal of the Listener is to identify the target
    based on what the Speaker has told you. You may also use the chatbox
    to ask for clarification if needed. If you are the Listener,
    you will first need to wait until the Speaker has sent at least
    one message before being able to select a chair.
</p>

    <p> Once the Listener clicks on
    the object they believe is the target, both players will be given
    feedback. So, the Speaker will see what the Listener clicked, and the
    Listener will see the true target. Then you will both automatically advance to the next round of chairs. There are a
    total of <b>32 rounds</b>. After the final round you will fill out a quick
    15 second survey and be on your way.
</p>

<p> A few final notes: First, since you are playing with another
  player, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitScreen.png" alt="initial matcher's board" style="width:700px;height:150px"></center>
  </p>
  Just hold tight. Another player should join the game within the next
  few minutes. If you're in the waiting room 15 minutes without
  another player joining, please email us to let us know (sketchloop@gmail.com).
</p>

<p>
  Second, please be respectful of the worker you're playing with: do
  not send inappropriate material to your partner, and try to be as responsive as possible.
</p>

<p>
  Finally, please DO NOT refresh the page at any point once you start
  the game (including the waiting page). If you refresh, you will not
  be able to rejoin the game you were in and you may not be able to
  submit the HIT. <br> Thank you!
</p>

<h4>
    Please fill out this short quiz below before getting started.
    Good luck and have fun!
</h4>






      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

     <div class="well" style="width:800px; margin: 0 auto">

  </br>
  The Speaker can click on a chair to end the round.
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>
    <input type="radio" name="dgoal" value="no"> True
    </br>


  </br>
  The Listener wants to click on the chair that the Speaker has described.
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>


  </br>
  The target is the chair which has the orange box around it.
      </br>
      <input type="radio" name="round" value="yes"> True
      </br>
      <input type="radio" name="round" value="no"> False
      </br>

  </br>
  Only the Speaker can use the chatbox.
      </br>
      <input type="radio" name="message" value="no"> True
      </br>
      <input type="radio" name="message" value="yes"> False
      </br>

  </br>
  There are a total of 200 rounds.
      </br>
      <input type="radio" name="comp" value="no"> True
      </br>
      <input type="radio" name="comp" value="yes"> False
      </br>

  </br>
  The locations of the three chairs are the same for the Speaker and the Listener.
      </br>
      <input type="radio" name="location" value="no"> True
      </br>
      <input type="radio" name="location" value="yes"> False
      </br>

  </br>
    <input id="quiz_submit" type="submit" value="Submit">
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);

      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();
        var ans6 = $('input[name="location"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../../lib/js/bootstrap.min.js"></script>
  </body>
</html>
